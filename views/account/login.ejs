<main>
    <h1><%= title %></h1>
  
    <!-- Flash message -->
    <div class="flash-message">
      <%- messages() %>
    </div>
  
    <!-- Login Form -->
    <form id="loginForm" action="/account/login" method="POST" class="login-form">
      <label for="email">Email: <span class="required">*</span></label>
      <input
        type="email"
        id="email"
        name="email"
        required
        value="<%= typeof email !== 'undefined' ? locals.email : '' %>"
      >
      <span class="validation-message"></span>

      <label for="password">Password: <span class="required">*</span></label>
      <input
        type="password"
        id="password"
        name="password"
        required
        pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{12,}$"
        title="Password must be at least 12 characters long, contain at least one uppercase letter, one lowercase letter, one number, and one special character."
      >
      <span class="validation-message"></span>

      <button type="submit">Login</button>
    </form>
  
    <!-- Registration Link -->
    <p class="register-link">
      No account? <a href="/account/register">Sign-up</a>.
    </p>
  </main>

  <script>
    document.querySelectorAll('input[required]').forEach((input) => {
      input.addEventListener('blur', (event) => {
        const field = event.target;
        const validationMessage = field.nextElementSibling;
  
        if (validationMessage && validationMessage.classList.contains('validation-message')) {
          if (!field.value) {
            field.classList.add('error');
            validationMessage.textContent = 'This field is required.';
          } else {
            field.classList.remove('error');
            validationMessage.textContent = '';
          }
        }
      });
    });
  </script>